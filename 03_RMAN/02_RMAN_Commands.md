# 02_RMAN_Commands.md
## RMAN Practical Commands (Backup Operations)

------------------------------------------------------------
1. Introduction to RMAN
------------------------------------------------------------

RMAN = Recovery Manager

Oracle's built-in tool for:
- Backup
- Restore
- Recovery

Advantages:
- Block-level backup
- Compression
- Validation
- Incremental backup
- Backup catalog support

------------------------------------------------------------
2. Connecting to RMAN
------------------------------------------------------------

Connect locally:

rman target /

Connect with username:

rman target sys/password

Connect with catalog:

rman target / catalog rman/rman@orcl

------------------------------------------------------------
3. Basic Full Database Backup
------------------------------------------------------------

Backup entire database:

BACKUP DATABASE;

Backup with format:

BACKUP DATABASE
FORMAT '/backup/full_%U.bkp';

%U → Unique file name generated by RMAN

------------------------------------------------------------
4. Backup Database + Archivelogs
------------------------------------------------------------

Recommended Production Backup:

BACKUP DATABASE PLUS ARCHIVELOG;

This includes:
- Datafiles
- Archived redo logs

------------------------------------------------------------
5. Backup Specific Tablespace
------------------------------------------------------------

BACKUP TABLESPACE users;

Multiple tablespaces:

BACKUP TABLESPACE users, system;

------------------------------------------------------------
6. Backup Specific Datafile
------------------------------------------------------------

Check datafiles:

SELECT file_id, file_name FROM dba_data_files;

Backup datafile:

BACKUP DATAFILE 4;

------------------------------------------------------------
7. Backup Control File
------------------------------------------------------------

Backup control file:

BACKUP CURRENT CONTROLFILE;

Backup control file to trace:

ALTER DATABASE BACKUP CONTROLFILE TO TRACE;

------------------------------------------------------------
8. Incremental Backup
------------------------------------------------------------

Level 0 Backup (Base):

BACKUP INCREMENTAL LEVEL 0 DATABASE;

Level 1 Backup:

BACKUP INCREMENTAL LEVEL 1 DATABASE;

Cumulative Level 1:

BACKUP INCREMENTAL LEVEL 1 CUMULATIVE DATABASE;

------------------------------------------------------------
9. Compressed Backup
------------------------------------------------------------

BACKUP AS COMPRESSED BACKUPSET DATABASE;

Saves disk space.

------------------------------------------------------------
10. Backup with Tag
------------------------------------------------------------

BACKUP DATABASE TAG 'WEEKLY_FULL';

Useful for identifying backup.

------------------------------------------------------------
11. Configure Retention Policy
------------------------------------------------------------

Set recovery window:

CONFIGURE RETENTION POLICY
TO RECOVERY WINDOW OF 7 DAYS;

Check configuration:

SHOW ALL;

------------------------------------------------------------
12. Crosscheck Backup
------------------------------------------------------------

Used to verify backup existence on disk.

CROSSCHECK BACKUP;

If backup missing → marked EXPIRED.

------------------------------------------------------------
13. Delete Obsolete Backup
------------------------------------------------------------

Delete backups outside retention:

DELETE OBSOLETE;

Delete expired backups:

DELETE EXPIRED BACKUP;

------------------------------------------------------------
14. List Backups
------------------------------------------------------------

List all backups:

LIST BACKUP;

List backup summary:

LIST BACKUP SUMMARY;

List archivelogs:

LIST ARCHIVELOG ALL;

------------------------------------------------------------
15. Validate Backup
------------------------------------------------------------

Check database for corruption:

VALIDATE DATABASE;

Validate backup:

RESTORE DATABASE VALIDATE;

------------------------------------------------------------
16. Backup Archivelogs Only
------------------------------------------------------------

BACKUP ARCHIVELOG ALL;

Delete archivelogs after backup:

BACKUP ARCHIVELOG ALL DELETE INPUT;

------------------------------------------------------------
17. RMAN Configuration Check
------------------------------------------------------------

SHOW ALL;

Important parameters:
- Retention policy
- Backup optimization
- Default device type
- Controlfile autobackup

Enable controlfile autobackup:

CONFIGURE CONTROLFILE AUTOBACKUP ON;

------------------------------------------------------------
18. Real-Time Backup Strategy Example
------------------------------------------------------------

Daily Backup Script Example:

RUN {
  BACKUP INCREMENTAL LEVEL 0 DATABASE
  PLUS ARCHIVELOG;
  DELETE OBSOLETE;
}

Weekly Strategy:
- Sunday → Level 0
- Mon–Sat → Level 1

------------------------------------------------------------
19. Important Interview Questions
------------------------------------------------------------

- Difference between Level 0 and Full backup?
- What is CROSSCHECK?
- What is DELETE OBSOLETE?
- What is controlfile autobackup?
- How to check backup status?
- What is %U in RMAN format?

------------------------------------------------------------
20. Production Best Practices
------------------------------------------------------------

- Always enable controlfile autobackup
- Always configure retention policy
- Always backup archivelogs
- Regularly test restore
- Store backup on different disk/server

------------------------------------------------------------
END OF FILE
------------------------------------------------------------
